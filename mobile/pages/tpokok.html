<template>
  <div class="page page-home">
    <div class="navbar" style="background-color: #2079cc; color: white">
      <div class="navbar-inner sliding">
        <div class="margin-left">
          <a href="#" class="link back" style="color: white">
            <i class="icon icon-back"></i>
            <span class="if-not-md"></span>
          </a>
        </div>
        <div class="title">DARTAR TUGAS POKOK</div>
        <div class="right">
          <button type="button" class="button sheet-open" style="color: white;" data-sheet="#cari_tahun_bulan">
            <i class="icon f7-icons">search</i>
          </button>
        </div>

      </div>
    </div>
    
         


    <div style="background: url('img/bg.png'); margin-top: 40px; height: 3798px;"></div>
    <div class="page-content" id="tugas_pokok" style="margin-top: -3830px;">
    
    </div>

    <div class="sheet-modal demo-sheet-swipe-to-close" style="height:auto;" id="cari_tahun_bulan">
      <div class="sheet-modal-inner">
        <div class="swipe-handler"></div>
        <div class="page-content">
            <div class="block-title block-title-large">From Pencarian</div>
            <div class="list">
                <div class="item-content item-input">
                    <div class="col-15">
                        <div class="item-media"><i class="icon f7-icons">calendar</i></div>
                    </div>
                    <div class="item-inner">
                        <div class="item-title item-label">Tahun*</div>
                        <div class="item-input-wrap">
                            <select id="tahun">
                                <option value="2020">2020</option>
                                <option value="2021">2021</option>
                                <option value="2022">2022</option>
                                <option value="2023">2023</option>
                                <option value="2024">2024</option>
                                <option value="2025">2025</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="item-content item-input">
                    <div class="col-15">
                        <div class="item-media"><i class="icon f7-icons">calendar</i></div>
                    </div>
                    <div class="item-inner">
                        <div class="item-title item-label">Bulan*</div>
                        <div class="item-input-wrap">
                            <select id="bulan">
                                <option value="1">Januari</option>
                                <option value="2">Februari</option>
                                <option value="3">Maret</option>
                                <option value="4">April</option>
                                <option value="5">Mei</option>
                                <option value="6">Juni</option>
                                <option value="7">Juli</option>
                                <option value="8">Agustus</option>
                                <option value="9">September</option>
                                <option value="10">Oktober</option>
                                <option value="11">November</option>
                                <option value="12">Desember</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="item-content item-input-row">
                    <button type="button" class="col button button-fill color-green" @click="{$() => tugas_pokok()}" style="margin-left: 20px;">Cari</button>
                    <button type="button" class="col button button-fill color-red" style="margin-left: 20px; margin-right: 10px;">Reset</button>
                </div>
                
  
            </div> 
            </div>
        </div>
    </div>

  </div>

</template>
<script>
  export default function (props, ctx) {
    var $on = ctx.$on;
    $on('pageAfterIn', () => {
      function tugas_pokok() {
        console.log('utuygy')
        var thn = $('#tahun').val();
        var bln = $('#bulan').val();
            app.request.json(url + "api/v1/tugas-pokok", { no_id: localStorage.getItem("no_id"), tahun: thn, bulan: bln }, function (data) {
                var tugas_pokok = "";
                if (data == "") {
                    tugas_pokok += `<center> Data tidak tersedia </center>`;
                } else {
                    var jlh = data.length;
                    var i = "";
                    for (i = 0; i < jlh; i++) {
                        tugas_pokok += `                    
                        <div class="card" >
                            <div class="list media-list" >
                                <ul>
                                    <li>
                                        <a href="javascript:void(0)" onclick="detail_tugas_pokok(`+ data[i].id_detail + `)" class="item-link item-content">
                                            <div class="item-media"><img src="img/gtugas1.png" width="44" /></div>
                                            <div class="item-inner">
                                                <div class="item-title" style="font-size: 110%;">`+ data[i].list_job + `</div>
                                                <div class="item-subtitle" style="font-size: 70%; color: blue;">`+ data[i].waktu_mulai + `</div>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        `;
                    }
                    tugas_pokok += `<input type="hidden" id="form_tahun_pokok" value="`+thn+`">`;
                }
                $("#tugas_pokok").html(tugas_pokok);
                app.popover.close()
            })
        }

    })
    return $render;
  }
</script>